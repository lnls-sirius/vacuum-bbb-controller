# VBC-BBB.db

# Record definition for controlling valves (through BBB pins).
# parameters:
# PORT: Name of the serial port configured in asynDriver.
# SCAN_RATE: Record scan rate (time interval between two consecutive valve status readings).

#==============================================================================
# Binary Output records: they are responsible for switching the relays
#==============================================================================
record(bo, "$(PREFIX):Relay1") {
    field(DESC, "Switch Relay 1")
    field(OUT, "@VBC-BBB.proto relay_1 $(PORT)")
    field(DTYP, "stream")
    field(SCAN, "Passive")
    field(ZNAM, "Off")                          # Zero Name
    field(ONAM, "On")                           # One Name
}
#------------------------------------------------------------------------------
record(bo, "$(PREFIX):Relay2") {
    field(DESC, "Switch Relay 2")
    field(OUT, "@VBC-BBB.proto relay_2 $(PORT)")
    field(DTYP, "stream")
    field(SCAN, "Passive")
    field(ZNAM, "Off")                          # Zero Name
    field(ONAM, "On")                           # One Name
}
#------------------------------------------------------------------------------
record(bo, "$(PREFIX):Relay3") {
    field(DESC, "Switch Relay 3")
    field(OUT, "@VBC-BBB.proto relay_3 $(PORT)")
    field(DTYP, "stream")
    field(SCAN, "Passive")
    field(ZNAM, "Off")                          # Zero Name
    field(ONAM, "On")                           # One Name
}
#------------------------------------------------------------------------------
record(bo, "$(PREFIX):Relay4") {
    field(DESC, "Switch Relay 4")
    field(OUT, "@VBC-BBB.proto relay_4 $(PORT)")
    field(DTYP, "stream")
    field(SCAN, "Passive")
    field(ZNAM, "Off")                          # Zero Name
    field(ONAM, "On")                           # One Name
}
#==============================================================================
# Binary Input records: they are responsible for reading the VAT valve status
#==============================================================================
record(bi, "$(PREFIX):ValveOpen") {
    field(DESC, "Read OPEN VAT Valve status")
    field(INP, "@VBC-BBB.proto valve_open $(PORT)")
    field(DTYP, "stream")
    field(SCAN, "$(SCAN_RATE)")
    field(ZNAM, "SW Open")                         # Zero Name
    field(ONAM, "SW Closed")                       # One Name
}
#------------------------------------------------------------------------------
record(bi, "$(PREFIX):ValveClosed") {
    field(DESC, "Read CLOSED VAT Valve status")
    field(INP, "@VBC-BBB.proto valve_closed $(PORT)")
    field(DTYP, "stream")
    field(SCAN, "$(SCAN_RATE)")
    field(ZNAM, "SW Open")                         # Zero Name
    field(ONAM, "SW Closed")                       # One Name
}
#==============================================================================
# Analog Input record: it is responsible for reading the pressure (and voltage)
#==============================================================================
record(ai, "$(PREFIX):ADC") {
    field(DESC, "Read the ADC code")
    field(INP, "@VBC-BBB.proto adc $(PORT)")
    field(EGU, "LSB")
    field(DTYP, "stream")
    field(SCAN, "$(SCAN_RATE)")
    field(PREC, "0")                            # Display Precision
}
#------------------------------------------------------------------------------
record(ai, "$(PREFIX):Voltage") {
    field(DESC, "Read the voltage in ADC")
    field(INP, "@VBC-BBB.proto voltage $(PORT)")
    field(EGU, "V")
    field(DTYP, "stream")
    field(SCAN, "I/O Intr")
    field(PREC, "5")                            # Display Precision
}
#------------------------------------------------------------------------------
record(ai, "$(PREFIX):EquipmentVoltage") {
    field(DESC, "Read the equipment voltage")
    field(INP, "@VBC-BBB.proto equipment_voltage $(PORT)")
    field(EGU, "V")
    field(DTYP, "stream")
    field(SCAN, "I/O Intr")
    field(PREC, "5")                            # Display Precision
}
#==============================================================================
record(ai, "$(PREFIX):Torr") {
    field(DESC, "Read the pressure in Torr")
    field(INP, "@VBC-BBB.proto torr $(PORT)")
    field(EGU, "Torr")
    field(DTYP, "stream")
    field(SCAN, "I/O Intr")
    field(PREC, "11")                            # Display Precision
}
#------------------------------------------------------------------------------
record(ai, "$(PREFIX):mbar") {
    field(DESC, "Read the pressure in mbar")
    field(INP, "@VBC-BBB.proto mbar $(PORT)")
    field(EGU, "mbar")
    field(DTYP, "stream")
    field(SCAN, "I/O Intr")
    field(PREC, "11")                            # Display Precision
}
#------------------------------------------------------------------------------
record(ai, "$(PREFIX):Pascal") {
    field(DESC, "Read the pressure in Pa")
    field(INP, "@VBC-BBB.proto pascal $(PORT)")
    field(EGU, "Pa")
    field(DTYP, "stream")
    field(SCAN, "I/O Intr")
    field(PREC, "11")                            # Display Precision
}
